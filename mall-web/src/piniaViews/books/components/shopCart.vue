<template>
  <div class="shopcart">
    <div class="content">
      <div class="content-left" @click="handleToPage('shopCartList')">
        <div class="num">
          <i v-if="totalCount === 0">
            <svg
              t="1741352013792"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="2478"
              width="32"
              height="32"
            >
              <path
                d="M434.993971 346.838108h33.032029v330.320296h-33.032029zM567.122089 346.838108h33.03203v330.320296h-33.03203zM699.250208 346.838108h33.032029v330.320296h-33.032029z"
                fill="#F9BA48"
                p-id="2479"
              ></path>
              <path
                d="M236.801793 776.254493h640.060317l141.556781-495.480444h-38.926706c-5.154758-103.754045-58.449956-115.613865-82.067417-115.613866-21.404755 0-37.492675 8.272982-49.546282 19.438689v-19.438689c0-27.317048 22.229235-49.549806 49.546282-49.549806v-33.032029c-45.533111 0-82.578312 37.045201-82.578312 82.581835v19.438689c-12.039514-11.165707-28.127434-19.438689-49.532189-19.438689-14.301548 0-39.455218 4.3937-58.284356 30.769997l22.627381-96.15756c5.714982-24.279863 0.116273-49.433533-15.376189-68.988495S675.586943 0.000035 650.644677 0.000035a81.063243 81.063243 0 0 0-78.748358 61.490665l-22.824692 91.298768c-29.350059-60.962152-91.563024-103.24315-163.623939-103.24315-100.170731 0-181.674401 81.507194-181.674401 181.677925 0 16.912399 2.52629 33.461886 7.117301 49.549806h-21.602066L134.238663 49.549841H5.577586v33.03203h102.563131l157.299405 660.640592h-28.638329c-45.533111 0-82.578312 37.045201-82.578312 82.581836s37.045201 82.581836 82.578312 82.581836h1.486882c-0.909041 5.38378-1.486882 10.883834-1.486882 16.517776 0 54.651713 44.444376 99.096089 99.096089 99.096089s99.096089-44.444376 99.096089-99.096089c0-5.63042-0.57784-11.130473-1.486882-16.517776h234.197971c-0.909041 5.38378-1.486882 10.883834-1.486882 16.517776 0 54.651713 44.444376 99.096089 99.096089 99.096089s99.096089-44.444376 99.096089-99.096089-44.444376-99.096089-99.096089-99.096089c-36.583633 0-68.523404 19.984818-85.685966 49.549806h-258.044453c-17.159038-29.564988-49.102332-49.549806-85.685966-49.549806s-68.523404 19.984818-85.685966 49.549806h-13.410123c-27.317048 0-49.546283-22.229235-49.546283-49.549806s22.229235-49.55333 49.546283-49.553329z m528.512474-578.06228c38.084609 0 49.796445 52.456625 49.895101 52.932286A16.489589 16.489589 0 0 0 831.328998 264.256272h0.049328a16.553011 16.553011 0 0 0 16.151341-13.082445c0.116273-0.528512 11.824586-52.981614 49.912718-52.981614 37.179091 0 47.055227 46.128569 49.084716 82.581836h-230.297549c2.033011-36.43565 11.905624-82.581836 49.084715-82.581836z m-198.688979 20.530948l37.309457-149.223735a48.073495 48.073495 0 0 1 46.706409-36.467361c14.798349 0 28.557291 6.655734 37.756931 18.251297a47.911417 47.911417 0 0 1 9.115078 40.928006L653.135733 280.774049h-93.116851c4.573395-16.08792 7.103208-32.633884 7.103207-49.549806 0-4.2281-0.345295-8.389255-0.627168-12.553933l0.130367 0.052851z m-32.535228 12.501082c0 17.011055-3.037185 33.60987-8.702839 49.549806h-48.640765c-5.683271-15.904702-8.720456-32.503517-8.720456-49.549806 0-34.370928 11.676602-66.856828 33.03203-93.215507 20.61551 25.516582 33.03203 57.939061 33.03203 93.215507z m-56.681201-116.554618c-27.450938 32.651501-42.411364 73.396289-42.411365 116.554618 0 16.930016 2.512196 33.479504 7.103208 49.549806H328.794674c4.591012-16.070303 7.103208-32.61979 7.103208-49.549806 0-43.154805-14.96395-83.903117-42.411364-116.554618 25.336888-20.034146 57.244948-32.091277 91.96117-32.091277s66.624282 12.057131 91.961171 32.091277z m-240.607066 116.554618c0-35.276446 12.420043-67.698924 33.03203-93.215507 21.355427 26.358679 33.03203 58.848102 33.032029 93.215507 0 17.046289-3.037185 33.641581-8.702838 49.549806H245.522249c-5.679747-15.939936-8.720456-32.538751-8.720456-49.549806z m-39.638435 82.581835h777.491176l-122.695932 429.416385H299.398811L197.163358 313.806078z m568.150909 545.026727c36.43565 0 66.064059 29.628409 66.064059 66.064059s-29.628409 66.064059-66.064059 66.06406-66.064059-29.628409-66.064059-66.06406 29.628409-66.064059 66.064059-66.064059z m-429.416385 0c36.43565 0 66.064059 29.628409 66.064059 66.064059s-29.628409 66.064059-66.064059 66.06406-66.064059-29.628409-66.064059-66.06406 29.631933-66.064059 66.064059-66.064059z"
                fill="#333333"
                p-id="2480"
              ></path>
              <path
                d="M765.314267 924.896864m-16.517777 0a16.517777 16.517777 0 1 0 33.035553 0 16.517777 16.517777 0 1 0-33.035553 0Z"
                fill="#333333"
                p-id="2481"
              ></path>
              <path
                d="M335.897882 924.896864m-16.517776 0a16.517777 16.517777 0 1 0 33.035553 0 16.517777 16.517777 0 1 0-33.035553 0Z"
                fill="#333333"
                p-id="2482"
              ></path>
              <path
                d="M302.865852 396.384391H880.924609v33.032029H302.865852zM319.383629 495.480479h528.512474V528.512509h-528.512474zM335.897882 594.576568H814.86055v33.03203H335.897882zM596.116284 164.691569l8.012249-32.045473 66.053489 16.51073-8.012249 32.045473zM579.602031 230.748581l8.008725-32.045473 66.053489 16.514253-8.012249 32.04195z"
                fill="#333333"
                p-id="2483"
              ></path>
            </svg>
          </i>
          <el-badge v-else :value="totalCount" class="item">
            <i>
              <svg
                t="1741352013792"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="2478"
                width="32"
                height="32"
              >
                <path
                  d="M434.993971 346.838108h33.032029v330.320296h-33.032029zM567.122089 346.838108h33.03203v330.320296h-33.03203zM699.250208 346.838108h33.032029v330.320296h-33.032029z"
                  fill="#F9BA48"
                  p-id="2479"
                ></path>
                <path
                  d="M236.801793 776.254493h640.060317l141.556781-495.480444h-38.926706c-5.154758-103.754045-58.449956-115.613865-82.067417-115.613866-21.404755 0-37.492675 8.272982-49.546282 19.438689v-19.438689c0-27.317048 22.229235-49.549806 49.546282-49.549806v-33.032029c-45.533111 0-82.578312 37.045201-82.578312 82.581835v19.438689c-12.039514-11.165707-28.127434-19.438689-49.532189-19.438689-14.301548 0-39.455218 4.3937-58.284356 30.769997l22.627381-96.15756c5.714982-24.279863 0.116273-49.433533-15.376189-68.988495S675.586943 0.000035 650.644677 0.000035a81.063243 81.063243 0 0 0-78.748358 61.490665l-22.824692 91.298768c-29.350059-60.962152-91.563024-103.24315-163.623939-103.24315-100.170731 0-181.674401 81.507194-181.674401 181.677925 0 16.912399 2.52629 33.461886 7.117301 49.549806h-21.602066L134.238663 49.549841H5.577586v33.03203h102.563131l157.299405 660.640592h-28.638329c-45.533111 0-82.578312 37.045201-82.578312 82.581836s37.045201 82.581836 82.578312 82.581836h1.486882c-0.909041 5.38378-1.486882 10.883834-1.486882 16.517776 0 54.651713 44.444376 99.096089 99.096089 99.096089s99.096089-44.444376 99.096089-99.096089c0-5.63042-0.57784-11.130473-1.486882-16.517776h234.197971c-0.909041 5.38378-1.486882 10.883834-1.486882 16.517776 0 54.651713 44.444376 99.096089 99.096089 99.096089s99.096089-44.444376 99.096089-99.096089-44.444376-99.096089-99.096089-99.096089c-36.583633 0-68.523404 19.984818-85.685966 49.549806h-258.044453c-17.159038-29.564988-49.102332-49.549806-85.685966-49.549806s-68.523404 19.984818-85.685966 49.549806h-13.410123c-27.317048 0-49.546283-22.229235-49.546283-49.549806s22.229235-49.55333 49.546283-49.553329z m528.512474-578.06228c38.084609 0 49.796445 52.456625 49.895101 52.932286A16.489589 16.489589 0 0 0 831.328998 264.256272h0.049328a16.553011 16.553011 0 0 0 16.151341-13.082445c0.116273-0.528512 11.824586-52.981614 49.912718-52.981614 37.179091 0 47.055227 46.128569 49.084716 82.581836h-230.297549c2.033011-36.43565 11.905624-82.581836 49.084715-82.581836z m-198.688979 20.530948l37.309457-149.223735a48.073495 48.073495 0 0 1 46.706409-36.467361c14.798349 0 28.557291 6.655734 37.756931 18.251297a47.911417 47.911417 0 0 1 9.115078 40.928006L653.135733 280.774049h-93.116851c4.573395-16.08792 7.103208-32.633884 7.103207-49.549806 0-4.2281-0.345295-8.389255-0.627168-12.553933l0.130367 0.052851z m-32.535228 12.501082c0 17.011055-3.037185 33.60987-8.702839 49.549806h-48.640765c-5.683271-15.904702-8.720456-32.503517-8.720456-49.549806 0-34.370928 11.676602-66.856828 33.03203-93.215507 20.61551 25.516582 33.03203 57.939061 33.03203 93.215507z m-56.681201-116.554618c-27.450938 32.651501-42.411364 73.396289-42.411365 116.554618 0 16.930016 2.512196 33.479504 7.103208 49.549806H328.794674c4.591012-16.070303 7.103208-32.61979 7.103208-49.549806 0-43.154805-14.96395-83.903117-42.411364-116.554618 25.336888-20.034146 57.244948-32.091277 91.96117-32.091277s66.624282 12.057131 91.961171 32.091277z m-240.607066 116.554618c0-35.276446 12.420043-67.698924 33.03203-93.215507 21.355427 26.358679 33.03203 58.848102 33.032029 93.215507 0 17.046289-3.037185 33.641581-8.702838 49.549806H245.522249c-5.679747-15.939936-8.720456-32.538751-8.720456-49.549806z m-39.638435 82.581835h777.491176l-122.695932 429.416385H299.398811L197.163358 313.806078z m568.150909 545.026727c36.43565 0 66.064059 29.628409 66.064059 66.064059s-29.628409 66.064059-66.064059 66.06406-66.064059-29.628409-66.064059-66.06406 29.628409-66.064059 66.064059-66.064059z m-429.416385 0c36.43565 0 66.064059 29.628409 66.064059 66.064059s-29.628409 66.064059-66.064059 66.06406-66.064059-29.628409-66.064059-66.06406 29.631933-66.064059 66.064059-66.064059z"
                  fill="#333333"
                  p-id="2480"
                ></path>
                <path
                  d="M765.314267 924.896864m-16.517777 0a16.517777 16.517777 0 1 0 33.035553 0 16.517777 16.517777 0 1 0-33.035553 0Z"
                  fill="#333333"
                  p-id="2481"
                ></path>
                <path
                  d="M335.897882 924.896864m-16.517776 0a16.517777 16.517777 0 1 0 33.035553 0 16.517777 16.517777 0 1 0-33.035553 0Z"
                  fill="#333333"
                  p-id="2482"
                ></path>
                <path
                  d="M302.865852 396.384391H880.924609v33.032029H302.865852zM319.383629 495.480479h528.512474V528.512509h-528.512474zM335.897882 594.576568H814.86055v33.03203H335.897882zM596.116284 164.691569l8.012249-32.045473 66.053489 16.51073-8.012249 32.045473zM579.602031 230.748581l8.008725-32.045473 66.053489 16.514253-8.012249 32.04195z"
                  fill="#333333"
                  p-id="2483"
                ></path>
              </svg>
            </i>
          </el-badge>
        </div>
      </div>
      <div class="content-right">
        <div class="totalPrice">¥ {{ totalPrice }}</div>
        <div class="toPay" @click="handleToPage('shopCartList')">
          <span>去支付</span>
          <i>
            <svg
              t="1741352310240"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="4299"
              width="16"
              height="16"
            >
              <path
                d="M47.104 453.632q0-43.008 20.992-57.856t66.048-14.848q20.48 0 64.512 0.512t93.696 0.512 96.768 0.512 74.752 0.512q38.912 1.024 61.44-6.656t22.528-35.328q0-20.48 1.536-48.64t1.536-48.64q1.024-35.84 20.48-45.568t49.152 14.848q30.72 24.576 71.68 58.368t84.992 69.12 86.016 69.632 74.752 59.904q29.696 24.576 30.208 46.592t-28.16 45.568q-29.696 24.576-70.144 56.32t-83.968 65.536-85.504 67.072-74.752 58.88q-35.84 28.672-58.88 21.504t-22.016-44.032l0-24.576 0-29.696q0-15.36-0.512-30.208t-0.512-27.136q0-25.6-15.36-32.256t-41.984-6.656q-29.696 0-77.824-0.512t-100.352-0.512-101.376-0.512-79.872-0.512q-13.312 0-27.648-2.56t-26.112-9.728-18.944-20.992-7.168-37.376q0-27.648-0.512-53.248t0.512-57.344z"
                p-id="4300"
              ></path>
            </svg>
          </i>
        </div>
      </div>
      <div class="ball-container">
        <transition
          @before-enter="beforeDrop"
          @enter="dropping"
          @after-enter="afterDrop"
        >
          <div class="ball" v-show="ball.showOrHidden">
            <div class="inner"></div>
          </div>
        </transition>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import router from "../../../router";
import ShopCart from "../service/shopCart";
const { totalCount, totalPrice } = ShopCart.refreshShopCartList();
const { beforeDrop, afterDrop, dropping, ball } = ShopCart;
const handleToPage = (name: string) => {
  router.push({ name });
};
</script>

<style scoped lang="scss">
.shopcart {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;

  .content {
    background: white;
    display: flex;
    align-items: center;
    justify-content: space-around;
    width: 100%;
    height: 0.73rem;

    &-left {
      margin-right: 0.5rem;
    }

    &-right {
      width: 3.5rem;
      height: 0.53rem;
      font-size: 0.29rem;
      background-color: #ffd102;
      color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 1rem;
      gap: 0.1rem;

      .toPay {
        display: flex;
        align-items: center;
        justify-content: center;

        span {
          font-size: 0.21rem;
        }
      }
    }
  }
}

.ball-container {
  .ball {
    width: 0.16rem;
    height: 0.16rem;
    position: fixed;
    left: 0.45rem;
    bottom: 0.2rem;
    // border-radius: 50%;
    // background: #1985f1;
    transition: transform 0.4s cubic-bezier(0.46, -0.35, 0.78, 0.45); // 添加过渡

    .inner {
      width: 0.16rem;
      height: 0.16rem;
      border-radius: 50%;
      background: #1985f1;
      transition: transform 0.4s linear; // 添加过渡
    }
  }
}
</style>
